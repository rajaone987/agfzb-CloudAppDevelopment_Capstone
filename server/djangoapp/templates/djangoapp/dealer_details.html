<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dealership Review</title>
    {% load static %}
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>

    <body>
        <nav class="navbar navbar-dark bg-dark">
            <div class="container-fluid">
                <div class="navbar-header">
                      <a class="navbar-brand" href="/djangoapp">Home</a>
                      
                      <a class="navbar-brand" href="/djangoapp/about">About Us</a>
                
                      <a class="navbar-brand" href="/djangoapp/contact">Contact</a>
                    </div>
                <ul class="nav navbar-nav navbar-right">
                    {% if user.is_authenticated %}
                    <li>
                        <a class="btn btn-link" href="#">{{ user.first_name }}({{ user.username }})</a>
                        <a class="btn btn-link" href="{%url 'djangoapp:logout'%}">Logout</a>
                    </li>
                    {% else %}
                    <li>
                        <form class="form-inline" action="{%url 'djangoapp:login'%}" method="post">
                            {% csrf_token %}
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="Username" name="username" >
                                <input type="password" class="form-control" placeholder="Password" name="psw" >
                                <button class="btn btn-primary" type="submit">Login</button>
                                <a class="btn btn-link" href="/djangoapp/registration">Sign Up</a>
                            </div>
                        </form>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </nav>

    <!--Add a nav bar here -->

    <!-- Add reviews as cards -->
    <div class="container">
        <table class="table">
          <thead>
            <tr>
                <th>itemData.id</th>
                <th>itemData.full_name</th>
                <th>itemData.city</th>
                <th>itemData.address</th>
                <th>itemData.lat</th>
                <th>itemData.long</th>
                <th>itemData.short_name</th>
                <th>itemData.st</th>
                <th>itemData.state</th>
                
                <th>itemData.zip + "</td></tr>";
            </tr>
          </thead>
          <tbody id="data">
      
          </tbody>
        </table>
      </div>

    </body>
    <script>

fetch("https://c3538d64.eu-gb.apigw.appdomain.cloud/api/dealership").then(
  res => {
    res.json().then(
      data => {
        console.log(data.data);
        if (data.data.length > 0) {

          var temp = "";
          data.data.forEach((itemData) => {
            temp += "<tr>";
            temp += "<td>" + itemData.id + "</td>";
            temp += "<td>" + itemData.full_name + "</td>";
            temp += "<td>" + itemData.city + "</td>";
            temp += "<td>" + itemData.address + "</td>";
            temp += "<td>" + itemData.lat + "</td>";
            temp += "<td>" + itemData.long + "</td>";
            temp += "<td>" + itemData.short_name + "</td>";
            temp += "<td>" + itemData.st + "</td>";
            temp += "<td>" + itemData.state + "</td>";
            
            temp += "<td>" + itemData.zip + "</td></tr>";
          });
          document.getElementById('data').innerHTML = temp;
        }
      }
    )
  }
)
    </script>

</html>